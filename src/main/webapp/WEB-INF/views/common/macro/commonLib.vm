
###########################
#macro(defaultIdForName $__name)${__name}_id#{end}

#macro(defaultUploadUrl $__appid)$!{link.getContextPath()}/$!{__appid}/plupload/upload.json#{end}
#macro(defaultDownloadUrl $__appid)$!{link.getContextPath()}/$!{__appid}/download#{end}

#macro(filterId $__name $__id)
#if(!$__id || $__id.isEmpty())#defaultIdForName($__name)#{else}$!{__id}#end
#end

#macro(rightTitle $__title $__class $__attr)
#parse("/common/other/righttitle.vm")
#end

#macro(buttonlayout $__class $__attr)
#parse("/common/other/button.layout.vm")
#end

#macro(useDateInput)
#if(!$__customcsstplist)
#set($__customcsstplist={})
#end
#set($__dummy=$__customcsstplist.put("/common/other/dateinputcss.vm", ""))
#if(!$__customscripttplist)
#set($__customscripttplist={})
#end
#set($__dummy=$__customscripttplist.put("/common/other/dateinputscript.vm", ""))
#end

#macro(useTabPlugin)
#if(!$__customscripttplist)
#set($__customscripttplist={})
#end
#set($__dummy=$__customscripttplist.put("/common/other/tabpluginscript.vm", ""))
#end

#macro(usePluploadPlugin)
#if(!$__customscripttplist)
#set($__customscripttplist={})
#end
#set($__dummy=$__customscripttplist.put("/common/other/pluploadscript.vm", ""))
#set($__dummy=$__customscripttplist.put("/common/other/json2script.vm", ""))
#set($__plupload_swf_url="$!{link.getContextURL()}/js/Moxie.swf")
#end

#macro(useArtDialog)
#if(!$__customcsstplist)
#set($__customcsstplist={})
#end
#set($__dummy=$__customcsstplist.put("/common/other/artdialogcss.vm", ""))
#if(!$__customscripttplist)
#set($__customscripttplist={})
#end
#set($__dummy=$__customscripttplist.put("/common/other/artdialogscript.vm", ""))
#parse("/common/other/showartdialog.vm")
#end

#macro(useBgiframe)
#if(!$__customscripttplist)
#set($__customscripttplist={})
#end
#set($__dummy=$__customscripttplist.put("/common/other/bgiframescript.vm", ""))
#end

#macro(useReveal)
#useBgiframe()
#if(!$__customscripttplist)
#set($__customscripttplist={})
#end
#set($__dummy=$__customscripttplist.put("/common/other/revealscript.vm", ""))
#end

###########################
###  使用本宏可以将vm文件中的脚本内容放置到布局文件中的#localhtmlscript()所在的位置
###     例如：
###      #@script()
###           <script type="text/javascript">
###               alert('hi');
###           </script>
###      #end
###
###########################
#macro(script)
#if(!$__localcustomscripttplist)
#set($__localcustomscripttplist={})
#end
#set($__dummy=$__localcustomscripttplist.put("$!bodyContent", ""))
#end

#macro(showStar $__per)
#set($__per=$math.toDouble($__per))
#set($__no_esc_html=true)
#set($__fullcount=false)
#set($__halfcount=false)
#set($__emptycount=false)
#set($__startmap={0:[0, 1, 4],1:[1, 0, 4],2:[1, 1, 3],3:[2, 0, 3],4:[2, 1, 2],5:[3, 0, 2],6:[3, 1, 1],7:[4, 0, 1],8:[4, 1, 0]})
#if($__per<1)
#set($__emptycount=5)#elseif($__per>=90)
#set($__fullcount=5)#{else}
#set($__jgint=$__per / 10)
#set($__jg=$__startmap[$math.toInteger($__jgint)])
#if($__jg)
#set($__fullcount=$__jg[0])
#set($__halfcount=$__jg[1])
#set($__emptycount=$__jg[2])
#end
#end
#starbar($__fullcount, $__halfcount, $__emptycount)#end

#macro(starbar $__fullcount $__halfcount $__emptycount)
#parse("/common/other/starbar.vm")#end